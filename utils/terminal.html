<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>rpa_logger.utils.terminal API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>rpa_logger.utils.terminal</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">import re
from shutil import get_terminal_size
from sys import stdout
from threading import Event
from typing import TextIO


# From cli-spinners (https://www.npmjs.com/package/cli-spinners)
INTERVAL = 0.080  # seconds
ASCII_FRAMES = [&#39;|&#39;, &#39;/&#39;, &#39;-&#39;, &#39;\\&#39;]
FRAMES = [&#39;⠋&#39;, &#39;⠙&#39;, &#39;⠹&#39;, &#39;⠸&#39;, &#39;⠼&#39;, &#39;⠴&#39;, &#39;⠦&#39;, &#39;⠧&#39;, &#39;⠇&#39;, &#39;⠏&#39;]


COLORS = dict(red=31, green=32, yellow=33, blue=34, magenta=35, grey=90)


def fit_to_width(text: str) -&gt; str:
    &#39;&#39;&#39;Fit formatted text into current terminal width

    If text does not fit to current terminal width, the end of the string is
    replaced with &#39;…&#39; character. If text contains ANSI escape codes,
    formatting is cleared when text is truncated.

    Args:
        text: Text to fit to terminal width.

    Returns:
        The possibly truncated string
    &#39;&#39;&#39;
    max_len = get_terminal_size().columns
    non_formatted_text = re.sub(r&#39;\033\[[0-9]+m&#39;, &#39;&#39;, text.replace(&#39;\r&#39;, &#39;&#39;))

    if len(non_formatted_text) &lt;= max_len:
        return text

    i = 0
    j = 0
    while i &lt; max_len - 2:
        match = re.match(r&#39;\r|\033\[[0-9]+m&#39;, text[(i + j):])
        if match:
            j += len(match.group(0))
        else:
            i += 1

    clear_formatting = &#39;\033[0m&#39; if re.search(r&#39;\033\[[0-9]+m&#39;, text) else &#39;&#39;
    return f&#39;{text[:(i + j)]}{clear_formatting}…&#39;


def clear_current_row(file: TextIO = stdout):
    &#39;&#39;&#39;Clear current terminal row

    Can be used, for example, when progress text is replaced with shorter one.

    Args:
        file: File to print output to. Defaults to stdout.
    &#39;&#39;&#39;
    width = get_terminal_size().columns
    print(f&#39;\r{&#34; &#34; * width}&#39;, file=file, end=&#39;&#39;)


def print_spinner_and_text(
        text: str,
        stop_event: Event,
        file: TextIO = stdout,
        ascii_only: bool = False) -&gt; None:
    &#39;&#39;&#39;Print spinner and text until stop event

    Args:
        text: Text to print after spinner.
        stop_event: Event to stop spinner loop.
        file: File to print output to. Defaults to stdout.
        ascii_only: If true, use ascii only spinner.
    &#39;&#39;&#39;
    frames = FRAMES if not ascii_only else ASCII_FRAMES

    i = 0
    while not stop_event.wait(INTERVAL):
        print(
            fit_to_width(f&#39;\r{frames[i % len(frames)]} {text}&#39;),
            file=file,
            end=&#39;&#39;)
        i += 1

    print(&#39;\r&#39;, end=&#39;&#39;)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="rpa_logger.utils.terminal.clear_current_row"><code class="name flex">
<span>def <span class="ident">clear_current_row</span></span>(<span>file: <class 'TextIO'> = sys.stdout)</span>
</code></dt>
<dd>
<div class="desc"><p>Clear current terminal row</p>
<p>Can be used, for example, when progress text is replaced with shorter one.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>file</code></strong></dt>
<dd>File to print output to. Defaults to stdout.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def clear_current_row(file: TextIO = stdout):
    &#39;&#39;&#39;Clear current terminal row

    Can be used, for example, when progress text is replaced with shorter one.

    Args:
        file: File to print output to. Defaults to stdout.
    &#39;&#39;&#39;
    width = get_terminal_size().columns
    print(f&#39;\r{&#34; &#34; * width}&#39;, file=file, end=&#39;&#39;)</code></pre>
</details>
</dd>
<dt id="rpa_logger.utils.terminal.fit_to_width"><code class="name flex">
<span>def <span class="ident">fit_to_width</span></span>(<span>text: str) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Fit formatted text into current terminal width</p>
<p>If text does not fit to current terminal width, the end of the string is
replaced with '…' character. If text contains ANSI escape codes,
formatting is cleared when text is truncated.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>text</code></strong></dt>
<dd>Text to fit to terminal width.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>The possibly truncated string</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def fit_to_width(text: str) -&gt; str:
    &#39;&#39;&#39;Fit formatted text into current terminal width

    If text does not fit to current terminal width, the end of the string is
    replaced with &#39;…&#39; character. If text contains ANSI escape codes,
    formatting is cleared when text is truncated.

    Args:
        text: Text to fit to terminal width.

    Returns:
        The possibly truncated string
    &#39;&#39;&#39;
    max_len = get_terminal_size().columns
    non_formatted_text = re.sub(r&#39;\033\[[0-9]+m&#39;, &#39;&#39;, text.replace(&#39;\r&#39;, &#39;&#39;))

    if len(non_formatted_text) &lt;= max_len:
        return text

    i = 0
    j = 0
    while i &lt; max_len - 2:
        match = re.match(r&#39;\r|\033\[[0-9]+m&#39;, text[(i + j):])
        if match:
            j += len(match.group(0))
        else:
            i += 1

    clear_formatting = &#39;\033[0m&#39; if re.search(r&#39;\033\[[0-9]+m&#39;, text) else &#39;&#39;
    return f&#39;{text[:(i + j)]}{clear_formatting}…&#39;</code></pre>
</details>
</dd>
<dt id="rpa_logger.utils.terminal.print_spinner_and_text"><code class="name flex">
<span>def <span class="ident">print_spinner_and_text</span></span>(<span>text: str, stop_event: threading.Event, file: <class 'TextIO'> = sys.stdout, ascii_only: bool = False) ‑> None</span>
</code></dt>
<dd>
<div class="desc"><p>Print spinner and text until stop event</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>text</code></strong></dt>
<dd>Text to print after spinner.</dd>
<dt><strong><code>stop_event</code></strong></dt>
<dd>Event to stop spinner loop.</dd>
<dt><strong><code>file</code></strong></dt>
<dd>File to print output to. Defaults to stdout.</dd>
<dt><strong><code>ascii_only</code></strong></dt>
<dd>If true, use ascii only spinner.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def print_spinner_and_text(
        text: str,
        stop_event: Event,
        file: TextIO = stdout,
        ascii_only: bool = False) -&gt; None:
    &#39;&#39;&#39;Print spinner and text until stop event

    Args:
        text: Text to print after spinner.
        stop_event: Event to stop spinner loop.
        file: File to print output to. Defaults to stdout.
        ascii_only: If true, use ascii only spinner.
    &#39;&#39;&#39;
    frames = FRAMES if not ascii_only else ASCII_FRAMES

    i = 0
    while not stop_event.wait(INTERVAL):
        print(
            fit_to_width(f&#39;\r{frames[i % len(frames)]} {text}&#39;),
            file=file,
            end=&#39;&#39;)
        i += 1

    print(&#39;\r&#39;, end=&#39;&#39;)</code></pre>
</details>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="rpa_logger.utils" href="index.html">rpa_logger.utils</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="rpa_logger.utils.terminal.clear_current_row" href="#rpa_logger.utils.terminal.clear_current_row">clear_current_row</a></code></li>
<li><code><a title="rpa_logger.utils.terminal.fit_to_width" href="#rpa_logger.utils.terminal.fit_to_width">fit_to_width</a></code></li>
<li><code><a title="rpa_logger.utils.terminal.print_spinner_and_text" href="#rpa_logger.utils.terminal.print_spinner_and_text">print_spinner_and_text</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>